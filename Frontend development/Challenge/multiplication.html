<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multiplication Challenge</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-image: url("dice-2415399_1280.jpg");
            background-repeat: no-repeat;
            background-size: cover;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            text-align: center;
        }

        .card {
            background-color: white;
            width: 100%;
            min-width: 30%;
            padding: 10px;
            border-radius: 5px;
        }

        #score {
            text-align: end;
        }

        #question {
            margin-top: 10px;
        }

        #input_div {
            width: 100%;
            margin-bottom: 13px;
        }

        input {
            width: 100%;
            padding: 3px;
            margin: 10px 0;
            border: 1px solid green;
            outline: none;
        }

        input::placeholder {
            color: grey;
            font-family: 'Courier New', Courier, monospace;
        }

        #confirm_btn {
            width: 100%;
            background-color: rgb(9, 188, 129);
            border: none;
            padding: 5px;
            color: white;

        }

        #confirm_btn:hover {
            background-color: rgb(64, 231, 175);
        }

        .report {
            display: flex;
            justify-content: space-around;
            margin: 15px 0;
        }

        #wrong,
        #right {
            padding: 3px 6px;
            border-radius: 3px;
        }

        button {
            cursor: pointer;
        }

        #start_btn,
        #end_btn {
            padding: 3px;
        }

        button:disabled {
            cursor: not-allowed;
        }

        #right {
            border: 2px solid green;
        }

        #wrong {
            border: 2px solid red;
        }

        .score {
            text-align: end;
        }

        .game_container {
            background-color: rgb(188, 241, 245);
            padding: 20px;
            width: 40%;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card_header {
            display: flex;
            justify-content: space-between;
        }
    </style>
</head>
<body>
    <div class="game_container">
        <div class="game_control">
            <button id="start_btn">start</button>
            <button onclick="endGame()" id="end_btn">End</button>
            <button onclick="clear()" id="clear_btn">Clear</button>

        </div>

        <div class="card">
            <div class="card_header">
                <p>Countdown: <b id="countdown">0</b></p>
                <p class="score">Score: <b id="score">0</b></p>
            </div>

            <h4 id="question">What is <span id="first_number">X</span> multiplied by <span id="second_number">Y</span>?
            </h4>
            <div id="input_div"><input type="number" name="" id="input_number" placeholder="Enter your answer"></div>
            <button id="confirm_btn" disabled>Confirm</button>

            <div class="report">
                <p>Missed: <b id="wrong">0</b></p>
                <p>Got: <b id="right">0</b></p>
            </div>
            <div class="questions">Total questions answered: <b id="total_questions">0</b></div>
        </div>
    </div>

    <script>
        let score = document.getElementById("score");
        let first_number = document.getElementById("first_number");
        let second_number = document.getElementById("second_number");
        let wrong = document.getElementById("wrong");
        let right = document.getElementById("right");
        let total_questions_el = document.getElementById("total_questions");
        let total_questions = 0;
        let player_answer = document.getElementById("input_number").value;
        let start_btn = document.getElementById("start_btn")
        let countdown = document.getElementById("countdown");
        let time_left = 5;
        let timer;
        const questions = [];
        let current_question = []
        let isStart = false;


        start_btn.addEventListener("click", () => {
            startGame();
            startCountdown();
        })
        function endGame() {
            clearInterval(timer)
            // countdown.innerHTML = 0
            first_number.innerHTML = "X",
                second_number.innerHTML = "Y"
            start_btn.disabled = false;
            start_btn.style.cursor = "pointer";
            confirm_btn.disabled = true;
        }
        function startCountdown() {
            timer = setInterval(() => {
                countDown();
            }, 1000)

        }
        function getRndInteger(min, max) {
            return Math.floor(Math.random() * (max - min)) + min;
        }
        confirm_btn.addEventListener("click", () => {
            calculateAgain()
            clearInterval(timer)
            countdown.innerHTML = 0;
            time_left = 0
            timer = setInterval(() => {

                countDown();
            }, 1000);
            generateQuestion()
        })

        function generateQuestion() {
            let random_first_number = getRndInteger(1, 13)
            let random_second_number = getRndInteger(1, 13)

            first_number.innerHTML = random_first_number;
            second_number.innerHTML = random_second_number;
            current_question = []
            current_question.push(Number(first_number.innerHTML))
            current_question.push(Number(second_number.innerHTML))
            total_questions.innerHTML = questions.length
            // callback();
        }
        function startGame() {
            let random_first_number = getRndInteger(1, 13)
            let random_second_number = getRndInteger(1, 13)
            if (isStart) {
                console.log("Your game has already begun!")
                return
            }
            start_btn.disabled = true
            start_btn.style.cursor = "not-allowed";
            first_number.innerHTML = random_first_number;
            second_number.innerHTML = random_second_number;
            current_question.push(Number(first_number.innerHTML), Number(second_number.innerHTML))
            isStart = true;
            confirm_btn.disabled = false
            confirm_btn.style.cursor = "pointer";

        }
        function countDown() {
            time_left--;
            time_left = time_left < 0 ? 0 : time_left;
            if (time_left == 0 && input_number.innerHTML == "") {
                wrong.innerHTML++
                score.innerHTML--
                // calculateAgain()
                time_left = 5
                // generateQuestion()
                // total_questions.innerHTML = questions.length
            }
            countdown.innerHTML = time_left;
        }

        // function calculate(operands) {
            
        //     questions.push(operands)
        //     console.log(operands)
        //     let [a, b] = operands
        //     let student_answer = Number(input_number.value);
        //     let right_answer = a * b
        //     input_number.value = "";
        //     if (student_answer === right_answer) {
        //         right.innerHTML++
        //         score.innerHTML++
        //     } else {
        //         wrong.innerHTML++
        //         score.innerHTML--
        //     }
        //     total_questions.innerHTML = questions.length
        //     console.log(total_questions.innerHTML)
        //     return [student_answer, right_answer]
        // }

        function calculateAgain() {
            questions.push(current_question)
            let [a, b] = current_question;
            let student_answer = Number(input_number.value);
            let right_answer = a * b
            input_number.value = "";
            if (student_answer === right_answer) {
                right.innerHTML++
                score.innerHTML++
            } else {
                wrong.innerHTML++
                score.innerHTML--
            }
            total_questions.innerHTML = questions.length
            console.log(total_questions.innerHTML)
            // return [student_answer, right_answer]
        }
    </script>
</body>
</html>